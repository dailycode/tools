function main(){pieChart()}function pieChart(){var e=[{value:30,color:"#F38630",label:"Bears"},{value:50,color:"#E0E4CC",label:"Lynxes"},{value:100,color:"#69D2E7",label:"Reindeer"},{value:100,color:"#06C",label:"Blue"}],o=document.getElementById("pieChart").getContext("2d"),l=new Chart(o).Pie(e);legend(document.getElementById("pieLegend"),e,l,"<%=label%>")}function legend(e,o){legend(e,o,null)}function legend(e,o,l,n){n="undefined"!=typeof n?n:"<%=label%>",e.className="legend";for(var a=o.hasOwnProperty("datasets")?o.datasets:o;e.hasChildNodes();)e.removeChild(e.lastChild);var t=l?showTooltip:noop;a.forEach(function(o,a){var d=document.createElement("div");d.className="titleLegend",e.appendChild(d);var r=document.createElement("span");r.className="colorBoxLegend",r.style.backgroundColor=o.hasOwnProperty("strokeColor")?o.strokeColor:o.color,r.style.borderColor=o.hasOwnProperty("fillColor")?o.fillColor:o.color,d.appendChild(r),legendNode=n.replace("<%=value%>",o.value),legendNode=legendNode.replace("<%=label%>",o.label);var i=document.createTextNode(legendNode);i.className="text-node",d.appendChild(i),t(l,d,a)})}function showTooltip(e,o,l){var n=Chart.helpers,a=e.segments;"undefined"!=typeof a&&(n.addEvent(o,"mouseover",function(){var o=a[l];o.save(),o.fillColor=o.highlightColor,e.showTooltip([o]),o.restore()}),n.addEvent(o,"mouseout",function(){e.draw()}))}function noop(){}window.addEventListener?window.addEventListener("DOMContentLoaded",main):window.attachEvent("onload",main);